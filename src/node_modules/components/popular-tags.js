import React, { useEffect } from 'react';
import { Link } from 'react-router-dom';

import useFetch from 'hooks/use-fetch';
import Loading from 'components/loading';

const PopularTags = () => {
  const [{ isLoading, response, error }, doFetch] = useFetch('/tags');

  useEffect(() => {
    doFetch();
  }, [doFetch]);

  if (isLoading || !response) {
    return <Loading />
  }

  if (error) {
    return <div>Error connect, 500</div>
  }

  return(
    <div className="sidebar">
      <p>Popular tags</p>
      <ul className="tag-list">
        {
          response.tags.map((tag) => (
            <li key={tag}>
              <Link className="tag-default tag-pill" to={`/tags/${tag}`}>
                {tag}
              </Link>
            </li>
          ))
        }
      </ul>
    </div>
  );
}

export default PopularTags;